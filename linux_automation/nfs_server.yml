---
 - name: Implement NFS Server
   hosts: servera
   tasks:
    
    - name: Install NFS Package
      yum:
        name: nfs-utils
        state: present

    - name: Start and Enable Service
      service:
        name: nfs-server
        state: started
        enabled: yes

    - name: Allow Firewall
      firewalld:
        service: nfs
        state: enabled
        permanent: yes

    - name: Create a Share dir
      file:
        path: /share1
        state: directory
        mode: 0775

    - name: Edit NFS Configuration
      copy:
        content: "/share1 serverb(ro)"
        dest: /etc/exports

    - name: Update the Share
      shell:
        cmd: exportfs -r
